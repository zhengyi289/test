<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>校园跑腿 - 流程监控</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 配置Tailwind -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3B82F6',
            secondary: '#10B981',
            warning: '#F59E0B',
            danger: '#EF4444',
            neutral: '#6B7280',
            light: '#F9FAFB',
            dark: '#1F2937'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-shadow {
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
      }
      .btn-effect {
        @apply transition-all duration-300 hover:shadow-md transform hover:-translate-y-0.5;
      }
      .task-item-hover {
        @apply transition-all duration-200 hover:shadow-lg;
      }
      .progress-line {
        @apply absolute left-5 top-8 bottom-8 w-0.5 bg-gray-200 -z-10;
      }
      .progress-dot {
        @apply absolute left-5 w-3 h-3 rounded-full bg-gray-300 -translate-x-1/2;
      }
      .progress-dot-active {
        @apply bg-primary;
      }
    }
  </style>
</head>
<body class="bg-gray-50 font-sans text-dark min-h-screen">
  <!-- 页面容器 -->
  <div class="page-container">
    <!-- 流程监控页面 -->
    <div id="monitoring-page" class="page active">
      <!-- 顶部导航 -->
      <header class="bg-white shadow-sm py-4 px-5 sticky top-0 z-30">
        <h1 class="text-xl font-bold text-center">流程监控</h1>
      </header>
      
      <!-- 搜索和筛选区 -->
      <div class="bg-white p-4">
        <div class="relative">
          <input type="text" placeholder="搜索任务..." class="w-full bg-gray-100 rounded-full py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary/30">
          <i class="fa fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </div>
        
        <div class="flex mt-4 border-b border-gray-200">
          <button class="flex-1 py-2 text-primary font-medium border-b-2 border-primary">全部</button>
          <button class="flex-1 py-2 text-gray-500">我发布的</button>
          <button class="flex-1 py-2 text-gray-500">我接取的</button>
        </div>
        
        <div class="flex justify-between items-center mt-4">
          <div class="flex gap-2">
            <button class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm btn-effect">
              <i class="fa fa-clock-o mr-1"></i>进行中
            </button>
            <button class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm btn-effect">
              <i class="fa fa-check mr-1"></i>已完成
            </button>
            <button class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm btn-effect">
              <i class="fa fa-times mr-1"></i>已取消
            </button>
          </div>
          
          <button class="text-gray-500 text-sm flex items-center btn-effect">
            <span>排序</span>
            <i class="fa fa-sort ml-1"></i>
          </button>
        </div>
      </div>
      
      <!-- 任务列表 -->
      <div class="p-4 space-y-4 pb-24">
        <!-- 我发布的任务 -->
        <div class="bg-white rounded-xl p-4 card-shadow task-item-hover" data-type="published" data-id="1">
          <div class="flex justify-between items-start">
            <div>
              <span class="bg-blue-100 text-primary text-xs px-2 py-1 rounded-full">取快递</span>
              <span class="ml-2 text-xs text-green-500 bg-green-50 px-2 py-0.5 rounded">进行中</span>
            </div>
            <button class="text-gray-400 hover:text-gray-600 expand-btn">
              <i class="fa fa-chevron-down"></i>
            </button>
          </div>
          
          <h3 class="text-lg font-semibold mt-3">帮取快递到宿舍楼</h3>
          
          <div class="mt-3 flex justify-between text-sm">
            <div class="text-gray-500">
              <i class="fa fa-user-o mr-1"></i>接取人: 张同学
            </div>
            <div class="text-gray-500">
              <i class="fa fa-clock-o mr-1"></i>剩余: 2小时
            </div>
          </div>
          
          <!-- 展开内容 -->
          <div class="mt-4 pt-3 border-t border-gray-100 hidden expand-content">
            <div class="flex flex-wrap gap-3 text-sm text-gray-600 mb-3">
              <div><i class="fa fa-map-marker text-primary mr-1"></i>南门快递点 → 2号宿舍楼</div>
              <div><i class="fa fa-money text-primary mr-1"></i>¥8.00</div>
              <div><i class="fa fa-calendar-o mr-1"></i>今天 18:00前</div>
            </div>
            
            <div class="flex justify-between items-center">
              <div class="text-xs text-gray-500">
                最新进度: <span class="text-primary">已取件，正在送往目的地</span>
              </div>
              <button class="text-primary text-sm font-medium">查看详情</button>
            </div>
          </div>
        </div>
        
        <!-- 我接取的任务 -->
        <div class="bg-white rounded-xl p-4 card-shadow task-item-hover border-l-4 border-primary" data-type="taken" data-id="2">
          <div class="flex justify-between items-start">
            <div>
              <span class="bg-yellow-100 text-warning text-xs px-2 py-1 rounded-full">买饭</span>
              <span class="ml-2 text-xs text-green-500 bg-green-50 px-2 py-0.5 rounded">进行中</span>
            </div>
            <button class="text-gray-400 hover:text-gray-600 expand-btn">
              <i class="fa fa-chevron-down"></i>
            </button>
          </div>
          
          <h3 class="text-lg font-semibold mt-3">帮忙带一份麻辣烫</h3>
          
          <div class="mt-3 flex justify-between text-sm">
            <div class="text-gray-500">
              <i class="fa fa-user-o mr-1"></i>发布人: 王同学
            </div>
            <div class="text-gray-500">
              <i class="fa fa-clock-o mr-1"></i>剩余: 45分钟
            </div>
          </div>
          
          <!-- 展开内容 -->
          <div class="mt-4 pt-3 border-t border-gray-100 hidden expand-content">
            <div class="flex flex-wrap gap-3 text-sm text-gray-600 mb-3">
              <div><i class="fa fa-map-marker text-primary mr-1"></i>二食堂 → 教学主楼503</div>
              <div><i class="fa fa-money text-primary mr-1"></i>¥5.00</div>
              <div><i class="fa fa-calendar-o mr-1"></i>今天 12:00前</div>
            </div>
            
            <div class="flex justify-between items-center">
              <div class="text-xs text-gray-500">
                最新进度: <span class="text-primary">已接单，准备去购买</span>
              </div>
              <button class="text-primary text-sm font-medium">查看详情</button>
            </div>
          </div>
        </div>
        
        <!-- 我发布的任务 -->
        <div class="bg-white rounded-xl p-4 card-shadow task-item-hover" data-type="published" data-id="3">
          <div class="flex justify-between items-start">
            <div>
              <span class="bg-purple-100 text-purple-600 text-xs px-2 py-1 rounded-full">代取件</span>
              <span class="ml-2 text-xs text-gray-500 bg-gray-50 px-2 py-0.5 rounded">已完成</span>
            </div>
            <button class="text-gray-400 hover:text-gray-600 expand-btn">
              <i class="fa fa-chevron-down"></i>
            </button>
          </div>
          
          <h3 class="text-lg font-semibold mt-3">帮取图书馆预约的书</h3>
          
          <div class="mt-3 flex justify-between text-sm">
            <div class="text-gray-500">
              <i class="fa fa-user-o mr-1"></i>接取人: 刘同学
            </div>
            <div class="text-gray-500">
              <i class="fa fa-clock-o mr-1"></i>完成于: 今天 10:30
            </div>
          </div>
          
          <!-- 展开内容 -->
          <div class="mt-4 pt-3 border-t border-gray-100 hidden expand-content">
            <div class="flex flex-wrap gap-3 text-sm text-gray-600 mb-3">
              <div><i class="fa fa-map-marker text-primary mr-1"></i>图书馆 → 3号宿舍楼</div>
              <div><i class="fa fa-money text-primary mr-1"></i>¥6.00</div>
              <div><i class="fa fa-calendar-o mr-1"></i>今天 15:00前</div>
            </div>
            
            <div class="flex justify-between items-center">
              <div class="text-xs text-gray-500">
                完成评价: <span class="text-yellow-400">★★★★★</span>
              </div>
              <button class="text-primary text-sm font-medium">查看详情</button>
            </div>
          </div>
        </div>
        
        <!-- 我接取的任务 -->
        <div class="bg-white rounded-xl p-4 card-shadow task-item-hover border-l-4 border-primary" data-type="taken" data-id="4">
          <div class="flex justify-between items-start">
            <div>
              <span class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full">打印</span>
              <span class="ml-2 text-xs text-gray-500 bg-gray-50 px-2 py-0.5 rounded">已完成</span>
            </div>
            <button class="text-gray-400 hover:text-gray-600 expand-btn">
              <i class="fa fa-chevron-down"></i>
            </button>
          </div>
          
          <h3 class="text-lg font-semibold mt-3">帮忙打印资料并送到教室</h3>
          
          <div class="mt-3 flex justify-between text-sm">
            <div class="text-gray-500">
              <i class="fa fa-user-o mr-1"></i>发布人: 王同学
            </div>
            <div class="text-gray-500">
              <i class="fa fa-clock-o mr-1"></i>完成于: 昨天 14:20
            </div>
          </div>
          
          <!-- 展开内容 -->
          <div class="mt-4 pt-3 border-t border-gray-100 hidden expand-content">
            <div class="flex flex-wrap gap-3 text-sm text-gray-600 mb-3">
              <div><i class="fa fa-map-marker text-primary mr-1"></i>打印店 → 1号教学楼302</div>
              <div><i class="fa fa-money text-primary mr-1"></i>¥4.00</div>
              <div><i class="fa fa-calendar-o mr-1"></i>昨天 16:00前</div>
            </div>
            
            <div class="flex justify-between items-center">
              <div class="text-xs text-gray-500">
                获得评价: <span class="text-yellow-400">★★★★☆</span>
              </div>
              <button class="text-primary text-sm font-medium">查看详情</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 发布者视角的任务详情页面 -->
    <div id="task-detail-publisher" class="page hidden">
      <!-- 顶部导航 -->
      <header class="bg-white shadow-sm py-4 px-5 sticky top-0 z-30 flex justify-between items-center">
        <button class="back-btn"><i class="fa fa-arrow-left"></i></button>
        <h1 class="text-xl font-bold">任务详情</h1>
        <div class="w-6"></div> <!-- 占位元素，使标题居中 -->
      </header>
      
      <!-- 任务基本信息 -->
      <div class="bg-white p-5">
        <div class="flex justify-between items-start">
          <div>
            <span class="bg-blue-100 text-primary text-xs px-2 py-1 rounded-full">取快递</span>
            <span class="ml-2 text-xs text-green-500 bg-green-50 px-2 py-0.5 rounded">进行中</span>
          </div>
          <div class="text-primary font-semibold">¥8.00</div>
        </div>
        
        <h2 class="text-xl font-bold mt-3">帮取快递到宿舍楼</h2>
        
        <div class="mt-4 space-y-2 text-sm">
          <div class="flex justify-between">
            <span class="text-gray-500">任务描述</span>
            <span>快递在南门快递点，取到后送到2号宿舍楼，重约3kg，谢谢！</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-500">取件信息</span>
            <span>南门快递点A区3号货架，取件码：876543</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-500">送达地点</span>
            <span>2号宿舍楼传达室</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-500">要求完成时间</span>
            <span>今天 18:00前</span>
          </div>
        </div>
        
        <!-- 操作按钮 -->
        <div class="flex gap-3 mt-5">
          <button class="flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg text-sm flex items-center justify-center btn-effect">
            <i class="fa fa-bell-o mr-1"></i> 提醒对方
          </button>
          <button class="flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg text-sm flex items-center justify-center btn-effect">
            <i class="fa fa-comment-o mr-1"></i> 联系
          </button>
          <button class="flex-1 bg-danger text-white py-2 rounded-lg text-sm flex items-center justify-center btn-effect">
            <i class="fa fa-times mr-1"></i> 申请取消
          </button>
        </div>
      </div>
      
      <!-- 接取人信息 -->
      <div class="bg-white p-5 mt-3">
        <h3 class="font-semibold mb-3">接取人信息</h3>
        <div class="flex items-center">
          <img src="https://picsum.photos/id/1066/60/60" alt="张同学" class="w-14 h-14 rounded-full object-cover">
          <div class="ml-3">
            <div class="font-medium">张同学</div>
            <div class="text-sm text-gray-500 mt-1 flex items-center">
              <i class="fa fa-star text-yellow-400 mr-1"></i>
              <span>4.9 (128条评价)</span>
            </div>
            <div class="text-sm text-gray-500 mt-1">
              <i class="fa fa-mobile mr-1"></i>
              <span>138****6789</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 任务流程 -->
      <div class="bg-white p-5 mt-3 mb-24">
        <div class="flex justify-between items-center mb-5">
          <h3 class="font-semibold">任务流程</h3>
          <button class="text-primary text-sm">设置节点</button>
        </div>
        
        <div class="relative">
          <div class="progress-line"></div>
          
          <!-- 流程节点1 -->
          <div class="mb-8 relative">
            <div class="progress-dot progress-dot-active"></div>
            <div class="ml-10">
              <div class="font-medium">任务发布</div>
              <div class="text-sm text-gray-500 mt-1">今天 10:30</div>
              <div class="text-sm mt-2 bg-gray-50 p-2 rounded">
                快递在南门快递点，取到后送到2号宿舍楼，重约3kg，谢谢！
              </div>
            </div>
          </div>
          
          <!-- 流程节点2 -->
          <div class="mb-8 relative">
            <div class="progress-dot progress-dot-active"></div>
            <div class="ml-10">
              <div class="font-medium">任务被接取</div>
              <div class="text-sm text-gray-500 mt-1">今天 10:45</div>
              <div class="text-sm mt-2 text-gray-600">
                张同学接取了您的任务
              </div>
            </div>
          </div>
          
          <!-- 流程节点3 -->
          <div class="mb-8 relative">
            <div class="progress-dot progress-dot-active"></div>
            <div class="ml-10">
              <div class="font-medium">已取件</div>
              <div class="text-sm text-gray-500 mt-1">今天 11:20</div>
              <div class="text-sm mt-2 bg-gray-50 p-2 rounded">
                已在快递点取到包裹，正在送往宿舍楼
              </div>
            </div>
          </div>
          
          <!-- 流程节点4 -->
          <div class="mb-8 relative">
            <div class="progress-dot"></div>
            <div class="ml-10">
              <div class="font-medium text-gray-400">已送达</div>
              <div class="text-sm text-gray-400 mt-1">待完成</div>
            </div>
          </div>
          
          <!-- 流程节点5 -->
          <div class="relative">
            <div class="progress-dot"></div>
            <div class="ml-10">
              <div class="font-medium text-gray-400">任务完成</div>
              <div class="text-sm text-gray-400 mt-1">待完成</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 接取者视角的任务详情页面 -->
    <div id="task-detail-taker" class="page hidden">
      <!-- 顶部导航 -->
      <header class="bg-white shadow-sm py-4 px-5 sticky top-0 z-30 flex justify-between items-center">
        <button class="back-btn"><i class="fa fa-arrow-left"></i></button>
        <h1 class="text-xl font-bold">任务详情</h1>
        <div class="w-6"></div> <!-- 占位元素，使标题居中 -->
      </header>
      
      <!-- 任务基本信息 -->
      <div class="bg-white p-5">
        <div class="flex justify-between items-start">
          <div>
            <span class="bg-yellow-100 text-warning text-xs px-2 py-1 rounded-full">买饭</span>
            <span class="ml-2 text-xs text-green-500 bg-green-50 px-2 py-0.5 rounded">进行中</span>
          </div>
          <div class="text-primary font-semibold">¥5.00</div>
        </div>
        
        <h2 class="text-xl font-bold mt-3">帮忙带一份麻辣烫</h2>
        
        <div class="mt-4 space-y-2 text-sm">
          <div class="flex justify-between">
            <span class="text-gray-500">任务描述</span>
            <span>二食堂三楼的麻辣烫，微辣，加麻加醋，送到教学主楼503教室。</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-500">取餐地点</span>
            <span>二食堂三楼东侧麻辣烫窗口</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-500">送达地点</span>
            <span>教学主楼503教室</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-500">要求完成时间</span>
            <span>今天 12:00前</span>
          </div>
        </div>
        
        <!-- 操作按钮 -->
        <div class="flex gap-3 mt-5">
          <button class="flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg text-sm flex items-center justify-center btn-effect">
            <i class="fa fa-comment-o mr-1"></i> 联系
          </button>
          <button class="flex-1 bg-warning text-white py-2 rounded-lg text-sm flex items-center justify-center btn-effect">
            <i class="fa fa-clock-o mr-1"></i> 申请延时
          </button>
          <button class="flex-1 bg-danger text-white py-2 rounded-lg text-sm flex items-center justify-center btn-effect">
            <i class="fa fa-times mr-1"></i> 取消任务
          </button>
        </div>
      </div>
      
      <!-- 发布人信息 -->
      <div class="bg-white p-5 mt-3">
        <h3 class="font-semibold mb-3">发布人信息</h3>
        <div class="flex items-center">
          <img src="https://picsum.photos/id/1027/60/60" alt="王同学" class="w-14 h-14 rounded-full object-cover">
          <div class="ml-3">
            <div class="font-medium">王同学</div>
            <div class="text-sm text-gray-500 mt-1 flex items-center">
              <i class="fa fa-star text-yellow-400 mr-1"></i>
              <span>4.7 (86条评价)</span>
            </div>
            <div class="text-sm text-gray-500 mt-1">
              <i class="fa fa-mobile mr-1"></i>
              <span>139****1234</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 任务流程 -->
      <div class="bg-white p-5 mt-3">
        <div class="flex justify-between items-center mb-5">
          <h3 class="font-semibold">任务流程</h3>
          <button class="text-primary text-sm update-progress-btn">更新进度</button>
        </div>
        
        <div class="relative">
          <div class="progress-line"></div>
          
          <!-- 流程节点1 -->
          <div class="mb-8 relative">
            <div class="progress-dot progress-dot-active"></div>
            <div class="ml-10">
              <div class="font-medium">任务发布</div>
              <div class="text-sm text-gray-500 mt-1">今天 09:15</div>
            </div>
          </div>
          
          <!-- 流程节点2 -->
          <div class="mb-8 relative">
            <div class="progress-dot progress-dot-active"></div>
            <div class="ml-10">
              <div class="font-medium">任务被接取</div>
              <div class="text-sm text-gray-500 mt-1">今天 09:30</div>
              <div class="text-sm mt-2 bg-gray-50 p-2 rounded">
                我已接取任务，将按时送达
              </div>
            </div>
          </div>
          
          <!-- 流程节点3 -->
          <div class="mb-8 relative">
            <div class="progress-dot"></div>
            <div class="ml-10">
              <div class="font-medium text-gray-400">已取餐</div>
              <div class="text-sm text-gray-400 mt-1">待完成</div>
            </div>
          </div>
          
          <!-- 流程节点4 -->
          <div class="mb-8 relative">
            <div class="progress-dot"></div>
            <div class="ml-10">
              <div class="font-medium text-gray-400">已送达</div>
              <div class="text-sm text-gray-400 mt-1">待完成</div>
            </div>
          </div>
          
          <!-- 流程节点5 -->
          <div class="relative">
            <div class="progress-dot"></div>
            <div class="ml-10">
              <div class="font-medium text-gray-400">任务完成</div>
              <div class="text-sm text-gray-400 mt-1">待完成</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 更新进度输入框 -->
      <div class="bg-white p-5 mt-3 mb-24">
        <h3 class="font-semibold mb-3">更新进度和备注</h3>
        <textarea placeholder="请输入当前进度或备注信息..." class="w-full border border-gray-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-primary/30 min-h-[100px]"></textarea>
        <button class="w-full bg-primary text-white py-3 rounded-lg mt-3 font-medium btn-effect">提交更新</button>
      </div>
    </div>
    
    <!-- 底部导航栏 -->
    <footer class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 z-40">
      <div class="container mx-auto px-6">
        <div class="flex justify-around">
          <a href="home·.html" class="flex flex-col items-center text-gray-500 hover:text-primary transition-colors">
            <i class="fa fa-home text-xl"></i>
            <span class="text-xs mt-1">首页</span>
          </a>
          <a href="#" class="flex flex-col items-center text-primary">
            <i class="fa fa-line-chart text-xl"></i>
            <span class="text-xs mt-1">流程监控</span>
          </a>
          <a href="weituofabu.html" class="flex flex-col items-center">
            <div class="w-14 h-14 rounded-full bg-primary text-white flex items-center justify-center -mt-7 shadow-lg btn-effect">
              <i class="fa fa-plus text-xl"></i>
            </div>
          </a>
          <a href="index.html" class="flex flex-col items-center text-gray-500 hover:text-primary transition-colors">
            <i class="fa fa-comments-o text-xl"></i>
            <span class="text-xs mt-1">对话</span>
          </a>
          <a href="personal（1）.html" class="flex flex-col items-center text-gray-500 hover:text-primary transition-colors">
            <i class="fa fa-user-o text-xl"></i>
            <span class="text-xs mt-1">我的</span>
          </a>
        </div>
      </div>
    </footer>
    
    <!-- 更新进度提示弹窗 -->
    <div id="progress-toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 hidden transition-all duration-300">
      <i class="fa fa-check-circle mr-2"></i>
      <span>进度更新成功！</span>
    </div>
  </div>

  <script>
    // 获取DOM元素
    const pages = document.querySelectorAll('.page');
    const monitoringPage = document.getElementById('monitoring-page');
    const publisherDetailPage = document.getElementById('task-detail-publisher');
    const takerDetailPage = document.getElementById('task-detail-taker');
    const backButtons = document.querySelectorAll('.back-btn');
    const expandButtons = document.querySelectorAll('.expand-btn');
    const taskItems = document.querySelectorAll('.task-item-hover');
    const updateProgressBtn = document.querySelector('.update-progress-btn');
    const progressToast = document.getElementById('progress-toast');
    const submitUpdateBtn = document.querySelector('button.btn-effect:last-of-type');
    
    // 页面切换函数
    function showPage(pageId) {
      pages.forEach(page => {
        page.classList.add('hidden');
      });
      document.getElementById(pageId).classList.remove('hidden');
    }
    
    // 展开/收起任务详情
    expandButtons.forEach(button => {
      button.addEventListener('click', function(e) {
        e.stopPropagation();
        const content = this.closest('.task-item-hover').querySelector('.expand-content');
        const icon = this.querySelector('i');
        
        if (content.classList.contains('hidden')) {
          content.classList.remove('hidden');
          icon.classList.remove('fa-chevron-down');
          icon.classList.add('fa-chevron-up');
        } else {
          content.classList.add('hidden');
          icon.classList.remove('fa-chevron-up');
          icon.classList.add('fa-chevron-down');
        }
      });
    });
    
    // 点击任务项进入详情页
    taskItems.forEach(item => {
      item.addEventListener('click', function() {
        const type = this.getAttribute('data-type');
        if (type === 'published') {
          showPage('task-detail-publisher');
        } else {
          showPage('task-detail-taker');
        }
      });
    });
    
    // 返回按钮事件
    backButtons.forEach(button => {
      button.addEventListener('click', function() {
        showPage('monitoring-page');
      });
    });
    
    // 更新进度按钮事件
    updateProgressBtn.addEventListener('click', function() {
      // 滚动到备注区域
      document.querySelector('textarea').scrollIntoView({ behavior: 'smooth' });
      document.querySelector('textarea').focus();
    });
    
    // 提交更新按钮事件
    submitUpdateBtn.addEventListener('click', function() {
      // 显示成功提示
      progressToast.classList.remove('hidden');
      setTimeout(() => {
        progressToast.classList.add('hidden');
      }, 2000);
    });
    
  </script>
</body>
</html>